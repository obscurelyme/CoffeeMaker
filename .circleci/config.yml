version: 2
jobs:
  # build:
  #   docker:
  #     - image: obscurelyme/coffeemaker:latest
  #       auth:
  #         username: obscurelyme
  #         password: $DOCKERHUB_PASSWORD
  #   steps:
  #     - checkout

  #     - run: bash ./scripts/configure.sh
  #     - run: bash ./scripts/build.sh
  #     - run: mkdir release
  #     - run: cp ./build/main ./release/ultra-cosmo-invaders
  #     - run: tar vcfz /tmp/ultra-cosmo-invaders.tar.gz ./release

  #     - store_artifacts:
  #         path: /tmp/ultra-cosmo-invaders.tar.gz

  build:
    machine:
      image: windows-default
    resource-class: windows.medium
    steps:
      - checkout
      - run: ./scripts/configure.bat
      - run: ./scripts/build.bat
      - run: mkdir release
      - run: robocopy build/Debug release /E
      - run: ./scripts/zip.bat

      - store_artifacts:
          path: ./win-release.zip
# workflows:
#   version: 2
#   coffeemaker_ci:

#     jobs:
#       - winBuild
